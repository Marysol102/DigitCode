<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta charset="UTF-8">
    <title>Hide Code - Master Edition Online</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <style>
        :root { 
            --bg-sheet: #ffffff; 
            --st-on: #222; 
            --st-off: #f0f0f0; 
            --accent-blue: #00d2ff;
            /* MEDIDAS DE PRECISIÓN */
            --seg-h-thick: 12px;
            --seg-v-height: 45px;
            --digit-h: 114px;
        }
        
        body { font-family: 'Segoe UI', sans-serif; background-color: #90a4ae; display: flex; flex-direction: column; align-items: center; padding: 20px; margin: 0; }
        .mode-selector { background: #263238; color: white; padding: 10px 20px; border-radius: 8px; margin-bottom: 15px; font-size: 14px; }
        .digit-reference { display: flex; gap: 15px; background: rgba(0,0,0,0.1); padding: 15px 25px; border-radius: 12px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.3); }
        .ref-item { display: flex; flex-direction: column; align-items: center; opacity: 0.7; }
        .ref-num { font-weight: bold; color: #000; margin-bottom: 5px; font-size: 14px; }
        .mini-seg-grid { position: relative; width: 20px; height: 35px; }
        .ms { position: absolute; background: #bbb; border-radius: 1px; }
        .m-h { height: 3px; left: 4px; right: 4px; }
        .m-v { width: 3px; height: 12px; }
        .active-ref { background: #000 !important; }
        
        .wrapper { display: flex; gap: 20px; max-width: 1350px; width: 100%; }
        .wrapper.vertical { flex-direction: column; align-items: center; }
        
        .sheet { background: var(--bg-sheet); padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.4); border-radius: 4px; flex-grow: 1; border: 1px solid #666; }
        .header-title { text-align: center; font-weight: 900; font-size: 30px; margin-bottom: 20px; border-bottom: 4px solid #000; padding-bottom: 10px; }
        
        /* GRID DE JUEGO */
        .game-grid { display: grid; grid-template-columns: 80px 1fr 40px 1fr 40px 1fr; align-items: start; gap: 5px; }
        
        .labels-side { display: flex; flex-direction: column; border-right: 3px solid #000; padding-right: 10px; margin-top: 37px; } 
        .label-row { 
            display: flex; 
            align-items: center; 
            justify-content: flex-end; 
            gap: 5px; 
            height: var(--seg-h-thick); 
            margin-bottom: 13px; 
            font-weight: bold;
            font-size: 14px;
        }
        .label-row:last-child { margin-bottom: 0; }
        .label-row input { width: 22px; height: 16px; text-align: center; border: 1px solid #ccc; font-size: 11px; }

        .digit-block { display: flex; flex-direction: column; align-items: center; padding: 0 5px; }
        /* DESPLAZAMIENTO PARA LA FILA INFERIOR */
        .digit-block.bottom-row { margin-top: 37px; } 

        .abc-header { display: flex; gap: 10px; margin-bottom: 10px; height: 25px; }
        .abc-item { display: flex; flex-direction: column; align-items: center; font-size: 11px; font-weight: bold; }
        .abc-item input { width: 18px; height: 14px; text-align: center; border: 1px solid #ccc; }

        .digit-visual { 
            position: relative; 
            width: 66px; 
            height: var(--digit-h); 
            background: #fff; 
            border: 1px solid #eee; 
        }
        .seg { position: absolute; background: var(--st-off); border: 1px solid #ddd; cursor: pointer; }
        .seg-h { height: var(--seg-h-thick); left: 12px; right: 12px; }
        .seg-v { width: 12px; height: 39px; } 
        
        .s-a { top: 0; } 
        .s-g { top: 51px; } 
        .s-d { bottom: 0; }
        
        .s-f { left: 0; top: 6px; } 
        .s-b { right: 0; top: 6px; }
        .s-e { left: 0; top: 57px; } 
        .s-c { right: 0; top: 57px; }

        .st-1 { background: var(--st-on) !important; border-color: #000; }
        
        .comp { width: 32px; height: 32px; border: 2px solid #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; background: #fff; cursor: pointer; align-self: center; margin-top: 40px;}
        .rotate-90 { transform: rotate(90deg); display: inline-block; }
        .v-comps { grid-column: 2 / 7; display: flex; justify-content: space-around; padding: 15px 0; }
        .scratch-pad { display: grid; grid-template-columns: repeat(5, 1fr); gap: 2px; margin-top: 10px; }
        .num-pick { font-size: 10px; width: 18px; height: 18px; border: 1px solid #ddd; cursor: pointer; text-align: center; line-height: 18px; }
        .num-pick.scratched { text-decoration: line-through; color: #ccc; background: #fafafa; }
        
        .ai-panel { background: #263238; color: #fff; width: 340px; padding: 20px; border-radius: 12px; height: fit-content; position: sticky; top: 20px; }
        .ai-panel h3 { color: var(--accent-blue); margin-top: 0; text-align: center; font-size: 18px; text-transform: uppercase; }
        .q-box { background: #37474f; padding: 12px; margin-bottom: 10px; border-radius: 6px; border-left: 4px solid var(--accent-blue); }
        .q-box label { font-size: 12px; font-weight: bold; display: block; margin-bottom: 8px; color: #cfd8dc; }
        select, button { width: 100%; padding: 8px; border-radius: 4px; border: none; font-size: 13px; }
        button { background: var(--accent-blue); color: #000; font-weight: bold; cursor: pointer; margin-top: 5px; }
        #log { background: #000; color: #00e676; height: 250px; overflow-y: auto; padding: 10px; font-family: monospace; font-size: 12px; border: 2px solid #455a64; margin-top: 10px; }
        .setup-box { border: 2px dashed #546e7a; padding: 12px; margin-bottom: 15px; text-align: center; border-radius: 8px; }
        .setup-inputs { display: flex; gap: 5px; justify-content: center; margin-top: 8px; }
        .setup-inputs input { width: 32px; height: 32px; text-align: center; font-weight: bold; font-size: 16px; border-radius: 4px; border: 1px solid #999; }
        .log-green { color: #00e676; }
        .log-yellow { color: #ffea00; }
        .log-red { color: #ff1744; font-weight: bold; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .login-box { background: #37474f; padding: 30px; border-radius: 12px; color: white; text-align: center; border: 2px solid var(--accent-blue); }
        
        /* ANIMACIÓN DE TURNO */
        @keyframes pulse-turn {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(76, 175, 80, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }
        .turn-tag { background: #ff5252; color: white; padding: 8px; border-radius: 4px; margin-bottom: 10px; font-weight: bold; text-align: center; transition: all 0.3s; }
        .turn-tag.active { 
            background: #4caf50; 
            animation: pulse-turn 1.5s infinite; 
            border: 2px solid #fff;
            font-size: 16px;
            padding: 12px;
        }
    </style>
</head>
<body>

<div id="login-screen" class="overlay">
    <div class="login-box">
        <h2>HIDE CODE ONLINE</h2>
        <input type="text" id="p-name" placeholder="Tu Nombre" style="padding:10px; width:200px; margin-bottom:10px;"><br>
        <input type="text" id="p-room" placeholder="Código de Sala" style="padding:10px; width:200px; margin-bottom:20px;"><br>
        <button onclick="connect()" style="width:224px; padding:10px;">ENTRAR A LA PARTIDA</button>
    </div>
</div>

<div id="turn-display" class="turn-tag">Conectando...</div>

<div class="mode-selector">
    Diseño: 
    <select onchange="document.getElementById('w').className = 'wrapper ' + this.value">
        <option value="">Horizontal (Derecha)</option>
        <option value="vertical">Vertical (Abajo)</option>
    </select>
</div>

<div class="digit-reference" id="ref-bar"></div>

<div class="wrapper" id="w">
    <div class="sheet">
        <div class="header-title">HIDE CODE</div>
        <div class="game-grid" id="main-grid"></div>
    </div>

    <div class="ai-panel">
        <h3 id="room-label">CONFIGURACIÓN</h3>
        <div class="setup-box" id="setup-area">
            <label style="font-size: 12px; font-weight: bold;">Código Secreto:</label>
            <div class="setup-inputs">
                <input type="text" id="s-0" maxlength="1" placeholder="T">
                <input type="text" id="s-1" maxlength="1" placeholder="U">
                <input type="text" id="s-2" maxlength="1" placeholder="V">
                <input type="text" id="s-3" maxlength="1" placeholder="W">
                <input type="text" id="s-4" maxlength="1" placeholder="X">
                <input type="text" id="s-5" maxlength="1" placeholder="Y">
            </div>
            <button onclick="setManualCode()" style="background: #ffc107;">Fijar Código</button>
            <button onclick="setRandomCode()" style="background: #8bc34a;">Generar Aleatorio</button>
        </div>

        <h3>INTERROGAR IA</h3>
        <div id="controls-block" style="pointer-events: none; opacity: 0.6;">
            <div class="q-box">
                <label>1. Suma de Segmentos</label>
                <select id="q1-v">
                    <optgroup label="Columnas">
                        <option value="A">Columna A</option><option value="B">Columna B</option><option value="C">Columna C</option>
                        <option value="D">Columna D</option><option value="E">Columna E</option><option value="F">Columna F</option>
                        <option value="G">Columna G</option><option value="H">Columna H</option><option value="I">Columna I</option>
                    </optgroup>
                    <optgroup label="Filas">
                        <option value="J">Fila J</option><option value="K">Fila K</option><option value="L">Fila L</option>
                        <option value="M">Fila M</option><option value="N">Fila N</option><option value="O">Fila O</option>
                        <option value="P">Fila P</option><option value="Q">Fila Q</option><option value="R">Fila R</option>
                        <option value="S">Fila S</option>
                    </optgroup>
                </select>
                <button onclick="askQ1()">Preguntar</button>
            </div>
            <div class="q-box">
                <label>2. Par/Imp o 3. Comparar</label>
                <div style="display:flex; gap:5px">
                    <select id="q2-1"><option value="0">T</option><option value="1">U</option><option value="2">V</option><option value="3">W</option><option value="4">X</option><option value="5">Y</option></select>
                    <select id="q2-2"><option value="">- Solo Par/Imp -</option><option value="0">T</option><option value="1">U</option><option value="2">V</option><option value="3">W</option><option value="4">X</option><option value="5">Y</option></select>
                </div>
                <button onclick="askQ23()">Preguntar</button>
            </div>
            <div class="q-box">
                <label>4. Coordenada Exacta</label>
                <div style="display:flex; gap:5px">
                    <select id="q4-c"></select>
                    <select id="q4-r"></select>
                </div>
                <button onclick="askQ4()">Preguntar</button>
            </div>
            <div id="log">Esperando conexión...</div>
            
            <button onclick="tryResolve()" style="background:#ff5252; color:white; margin-top:10px;">¡RESOLVER CÓDIGO!</button>
            <button id="btn-reveal" onclick="reveal()" style="background:#546e7a; color:#fff; margin-top: 10px; display:none;">Ver Solución (Solo Dealer)</button>
        </div>
    </div>
</div>

<script>
    const firebaseConfig = { 
        apiKey: "AIzaSyDWST4NKU_roqoGsMAAevs4zd-c4IqAOEU", 
        authDomain: "digitcode-d991e.firebaseapp.com", 
        databaseURL: "https://digitcode-d991e-default-rtdb.europe-west1.firebasedatabase.app", 
        projectId: "digitcode-d991e", 
        storageBucket: "digitcode-d991e.firebasestorage.app", 
        messagingSenderId: "958984288633", 
        appId: "1:958984288633:web:c88980de5de0a5422597a8" 
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const shapes = {0:[1,1,1,1,1,1,0],1:[0,1,1,0,0,0,0],2:[1,1,0,1,1,0,1],3:[1,1,1,1,0,0,1],4:[0,1,1,0,0,1,1],5:[1,0,1,1,0,1,1],6:[1,0,1,1,1,1,1],7:[1,1,1,0,0,0,0],8:[1,1,1,1,1,1,1],9:[1,1,1,1,0,1,1]};
    const ady = {0:[1,3], 1:[0,2,4], 2:[1,5], 3:[0,4], 4:[1,3,5], 5:[2,4]};
    const names = ['T','U','V','W','X','Y'];
    let secret = null;
    let myName = "";
    let roomId = "";
    let gameState = null;

    function connect() {
        myName = document.getElementById('p-name').value.trim();
        roomId = document.getElementById('p-room').value.trim();
        if(!myName || !roomId) return alert("Faltan datos");
        document.getElementById('login-screen').style.display = 'none';
        const roomRef = db.ref('rooms/' + roomId);
        roomRef.once('value', snapshot => {
            if(!snapshot.exists()) {
                roomRef.set({ turn: 0, players: [myName], logs: [{m: "PARTIDA INICIADA", s: "ok"}], dealer: "" });
            } else {
                let p = snapshot.val().players || [];
                if(!p.includes(myName)) { p.push(myName); roomRef.update({ players: p }); }
            }
            roomRef.on('value', s => { 
                gameState = s.val(); 
                secret = gameState.secret;
                syncUI(); 
            });
        });
    }

    function syncUI() {
        const curPlayer = gameState.players[gameState.turn % gameState.players.length];
        const isMyTurn = curPlayer === myName;
        const banner = document.getElementById('turn-display');
        const ctrl = document.getElementById('controls-block');

        banner.innerText = isMyTurn ? "¡ES TU TURNO!" : "Turno de: " + curPlayer;
        banner.className = "turn-tag " + (isMyTurn ? "active" : "");
        ctrl.style.pointerEvents = isMyTurn ? "auto" : "none";
        ctrl.style.opacity = isMyTurn ? "1" : "0.6";
        document.getElementById('room-label').innerText = "SALA: " + roomId;

        if(secret) document.getElementById('setup-area').style.display = 'none';
        document.getElementById('btn-reveal').style.display = (gameState.dealer === myName) ? 'block' : 'none';

        const lBox = document.getElementById('log');
        lBox.innerHTML = (gameState.logs || []).map((l, i) => 
            `<span class="${l.s === 'error' ? 'log-red' : (i % 2 === 0 ? 'log-green' : 'log-yellow')}">[#${i+1}] > ${l.m}</span>`
        ).reverse().join('<br>');
    }

    function pushAction(msg, isError = false) {
        let newLogs = gameState.logs || [];
        newLogs.push({ m: myName.toUpperCase() + ": " + msg, s: isError ? 'error' : 'ok' });
        db.ref('rooms/' + roomId).update({ logs: newLogs, turn: gameState.turn + 1 });
    }

    window.setManualCode = () => {
        let temp = [];
        for(let i=0; i<6; i++) {
            let val = document.getElementById('s-'+i).value;
            if(val === "" || isNaN(val)) return alert("Números inválidos.");
            temp.push(parseInt(val));
        }
        for(let i=0; i<6; i++) {
            for(let n of ady[i]) { if(temp[i] === temp[n]) return alert(`Error: ${names[i]} y ${names[n]} adyacentes.`); }
        }
        db.ref('rooms/' + roomId).update({ secret: temp, dealer: myName, logs: [{m: "CÓDIGO FIJADO POR " + myName + " (DEALER)", s: "ok"}] });
    };

    window.setRandomCode = () => {
        let temp = [null,null,null,null,null,null];
        for(let i=0; i<6; i++) {
            let forbid = [];
            ady[i].forEach(n => { if(temp[n]!==null) forbid.push(temp[n]); });
            let poss = [0,1,2,3,4,5,6,7,8,9].filter(x => !forbid.includes(x));
            temp[i] = poss[Math.floor(Math.random()*poss.length)];
        }
        db.ref('rooms/' + roomId).update({ secret: temp, dealer: myName, logs: [{m: "CÓDIGO GENERADO POR " + myName + " (DEALER)", s: "ok"}] });
    };

    window.tryResolve = () => {
        const attempts = (gameState.attempts && gameState.attempts[myName]) || 0;
        if(attempts >= 2) return alert("Has agotado tus 2 intentos.");
        const guess = prompt("INTRODUCE EL CÓDIGO DE 6 DÍGITOS:");
        if(!guess) return;
        const newAttempts = {...(gameState.attempts || {})};
        newAttempts[myName] = attempts + 1;
        if(guess === secret.join('')) {
            pushAction(`¡HA RESUELTO EL CÓDIGO! GANADOR: ${myName}`);
            alert("¡VICTORIA!");
        } else {
            pushAction(`FALLÓ EL CÓDIGO (Intento ${attempts + 1}/2)`);
            db.ref('rooms/' + roomId).update({ attempts: newAttempts });
            if(attempts + 1 >= 2) pushAction(`HA QUEDADO ELIMINADO`, true);
        }
    };

    window.askQ1 = () => {
        const v = document.getElementById('q1-v').value;
        const colMap = {'A':[0,3,[5,4]],'B':[0,3,[0,6,3]],'C':[0,3,[1,2]],'D':[1,4,[5,4]],'E':[1,4,[0,6,3]],'F':[1,4,[1,2]],'G':[2,5,[5,4]],'H':[2,5,[0,6,3]],'I':[2,5,[1,2]]};
        const rowMap = {'J':[[0,1,2],[0]],'K':[[0,1,2],[5,1]],'L':[[0,1,2],[6]],'M':[[0,1,2],[4,2]],'N':[[0,1,2],[3]],'O':[[3,4,5],[0]],'P':[[3,4,5],[5,1]],'Q':[[3,4,5],[6]],'R':[[3,4,5],[4,2]],'S':[[3,4,5],[3]]};
        let c = 0;
        if(colMap[v]) colMap[v].slice(0,2).forEach(d=>colMap[v][2].forEach(s=>{if(shapes[secret[d]][s])c++}));
        else rowMap[v][0].forEach(d=>rowMap[v][1].forEach(s=>{if(shapes[secret[d]][s])c++}));
        pushAction(`Suma en ${v}: ${c}`);
    };

    window.askQ23 = () => {
        const d1 = parseInt(document.getElementById('q2-1').value);
        const d2v = document.getElementById('q2-2').value;
        if(d2v === "") pushAction(`${names[d1]} es ${secret[d1]%2===0?'PAR':'IMPAR'}`);
        else {
            const d2 = parseInt(d2v);
            if(!ady[d1].includes(d2)) return pushAction(`Error: ${names[d1]}-${names[d2]} no adyacentes`, true);
            let res = secret[d1] > secret[d2] ? '>' : (secret[d1] < secret[d2] ? '<' : '=');
            pushAction(`${names[d1]} ${res} ${names[d2]}`);
        }
    };

    window.askQ4 = () => {
        const c = document.getElementById('q4-c').value;
        const r = document.getElementById('q4-r').value;
        const cIdx = ['ABC','DEF','GHI'].findIndex(g => g.includes(c));
        const dIdx = cIdx + ('OPQRS'.includes(r) ? 3 : 0);
        const cT = ['ADG','BEH','CFI'].findIndex(g => g.includes(c));
        const rT = ['JO','KP','LQ','MR','NS'].findIndex(g => g.includes(r));
        const map = {"1-0":0,"2-1":1,"2-3":2,"1-4":3,"0-3":4,"0-1":5,"1-2":6};
        const sIdx = map[`${cT}-${rT}`];
        if(sIdx!==undefined) pushAction(`${c}-${r}: ${shapes[secret[dIdx]][sIdx]?'ENCENDIDO':'APAGADO'}`);
    };

    window.reveal = () => { if(gameState.dealer === myName) pushAction(`REVELÓ LA SOLUCIÓN: ${secret.join(' - ')}`); };

    function createRefBar() {
        const bar = document.getElementById('ref-bar');
        for(let i=0; i<=9; i++) {
            let res = shapes[i];
            bar.innerHTML += `<div class="ref-item"><div class="ref-num">${i}</div><div class="mini-seg-grid">
                <div class="ms m-h ${res[0]?'active-ref':''}" style="top:0"></div>
                <div class="ms m-v ${res[5]?'active-ref':''}" style="top:2px;left:0"></div>
                <div class="ms m-v ${res[1]?'active-ref':''}" style="top:2px;right:0"></div>
                <div class="ms m-h ${res[6]?'active-ref':''}" style="top:16px"></div>
                <div class="ms m-v ${res[4]?'active-ref':''}" style="top:18px;left:0"></div>
                <div class="ms m-v ${res[2]?'active-ref':''}" style="top:18px;right:0"></div>
                <div class="ms m-h ${res[3]?'active-ref':''}" style="bottom:0"></div>
            </div></div>`;
        }
    }

    function initGrid() {
        const grid = document.getElementById('main-grid');
        let html = '<div class="labels-side">';
        'JKLMN'.split('').forEach(l => html += `<div class="label-row">${l}<input></div>`);
        html += '</div>';
        [0,1,2].forEach(i => {
            html += `<div class="digit-block">
                <div class="abc-header">${[['A','B','C'],['D','E','F'],['G','H','I']][i].map(l=>`<div class="abc-item">${l}<input></div>`).join('')}</div>
                <div class="digit-visual">${['s-a','s-b','s-c','s-d','s-e','s-f','s-g'].map(s=>`<div class="seg ${s=='s-a'||s=='s-g'||s=='s-d'?'seg-h':'seg-v'} ${s}" onclick="m(this)"></div>`).join('')}</div>
                <div class="scratch-pad">${[0,1,2,3,4,5,6,7,8,9].map(n=>`<div class="num-pick" onclick="this.classList.toggle('scratched')">${n}</div>`).join('')}</div>
                <input style="margin-top:10px; width:50px; text-align:center; font-weight:bold" placeholder="${names[i]}">
            </div>`;
            if(i < 2) html += '<div class="comp" onclick="cyc(this)">?</div>';
        });
        html += '<div class="v-comps"><div class="comp" onclick="cyc(this)">?</div><div class="comp" onclick="cyc(this)">?</div><div class="comp" onclick="cyc(this)">?</div></div>';
        html += '<div class="labels-side">';
        'OPQRS'.split('').forEach(l => html += `<div class="label-row">${l}<input></div>`);
        html += '</div>';
        [3,4,5].forEach(i => {
            html += `<div class="digit-block bottom-row">
                <div class="digit-visual">${['s-a','s-b','s-c','s-d','s-e','s-f','s-g'].map(s=>`<div class="seg ${s=='s-a'||s=='s-g'||s=='s-d'?'seg-h':'seg-v'} ${s}" onclick="m(this)"></div>`).join('')}</div>
                <div class="scratch-pad">${[0,1,2,3,4,5,6,7,8,9].map(n=>`<div class="num-pick" onclick="this.classList.toggle('scratched')">${n}</div>`).join('')}</div>
                <input style="margin-top:10px; width:50px; text-align:center; font-weight:bold" placeholder="${names[i]}">
            </div>`;
            if(i < 5) html += '<div class="comp" onclick="cyc(this)">?</div>';
        });
        grid.innerHTML = html;
        document.getElementById('q4-c').innerHTML = 'ABCDEFGHI'.split('').map(v => `<option value="${v}">${v}</option>`).join('');
        document.getElementById('q4-r').innerHTML = 'JKLMNOPQRS'.split('').map(v => `<option value="${v}">${v}</option>`).join('');
    }

    // MODIFICADO: SOLO TOGGLE NEGRO/BLANCO
    window.m = (el) => { 
        if(el.classList.contains('st-1')) { 
            el.classList.remove('st-1'); 
        } else { 
            el.classList.add('st-1'); 
        } 
    };

    // MODIFICADO: ELIMINADO EL SÍMBOLO '='
    window.cyc = (el) => { 
        const s = ['?', '>', '<']; 
        let nextIdx = (s.indexOf(el.innerText)+1)%3; 
        let symbol = s[nextIdx]; 
        el.innerText = symbol; 
        el.style.background = symbol === '?' ? 'white' : '#fff59d'; 
        if(el.parentElement.classList.contains('v-comps')) { 
            if(symbol !== '?') el.classList.add('rotate-90'); 
            else el.classList.remove('rotate-90'); 
        } 
    };

    createRefBar();
    initGrid();
</script>
</body>
</html>